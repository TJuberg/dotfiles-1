#!/usr/bin/env bash

# Check git and tmux availability
if ! which git >/dev/null; then
    echo "You need to install git to user this dotfiles repo. EXITING..."
    exit -1
fi

if [[ $(tmux -V) != 'tmux 2.0' ]]; then
    echo "This dotfiles repository is compatible with tmux 2.0 only. EXITING..."
    echo "Setting up tmux:"
    echo "    apt-get install build-essential libncurses5-dev libevent1-dev libncurses5 libevent-1.4"
    echo "    wget https://github.com/tmux/tmux/releases/download/2.0/tmux-2.0.tar.gz"
    echo "    tar xzf tmux-2.0.tar.gz"
    echo "    cd tmux-2.0"
    echo "    ./configure"
    echo "    make"
    echo "    sudo make install"
    exit -1
fi

echo -n "Installing dotfiles... "
if [ -e "$HOME/.dotfiles" ]; then
    echo "$HOME/.dotfiles directory already exists. EXITING..."
    exit -1
else
    git clone https://github.com/kmARC11/dotfiles.git "$HOME/.dotfiles"
    echo "DONE"
fi

echo "Using rcup to set up dotfiles..."
env RCRC="$HOME/.dotfiles/rcrc rcup"

echo "DONE"
